<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Money - Working Version</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        function App() {
            const [transactions, setTransactions] = React.useState(() => {
                try {
                    const saved = localStorage.getItem('transactions');
                    return saved ? JSON.parse(saved) : [];
                } catch {
                    return [];
                }
            });

            const [showModal, setShowModal] = React.useState(false);
            const [editingId, setEditingId] = React.useState(null);

            React.useEffect(() => {
                localStorage.setItem('transactions', JSON.stringify(transactions));
            }, [transactions]);

            const addTransaction = (transaction) => {
                const newTransaction = {
                    ...transaction,
                    id: Date.now().toString(),
                    createdAt: Date.now()
                };
                setTransactions([...transactions, newTransaction]);
                setShowModal(false);
            };

            const updateTransaction = (updatedTransaction) => {
                setTransactions(transactions.map(t =>
                    t.id === editingId ? { ...updatedTransaction, id: editingId } : t
                ));
                setEditingId(null);
                setShowModal(false);
            };

            const deleteTransaction = (id) => {
                if (confirm('Are you sure you want to delete this transaction?')) {
                    setTransactions(transactions.filter(t => t.id !== id));
                }
            };

            const editTransaction = (id) => {
                setEditingId(id);
                setShowModal(true);
            };

            const exportToCSV = () => {
                const headers = ['Date', 'Description', 'Amount', 'Type'];
                const rows = transactions.map(t => [
                    new Date(t.date).toLocaleDateString(),
                    t.description,
                    t.amount,
                    t.type
                ]);

                const csv = [headers, ...rows].map(row => row.join(',')).join('\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `transactions-${Date.now()}.csv`;
                a.click();
                URL.revokeObjectURL(url);
            };

            return React.createElement('div', { className: 'min-h-screen bg-gray-50 p-4' }, [
                React.createElement('div', { key: 'header', className: 'max-w-2xl mx-auto mb-6' }, [
                    React.createElement('h1', { key: 'title', className: 'text-3xl font-bold text-gray-900 mb-4 text-center' }, 'üí∞ My Money'),
                    React.createElement('div', { key: 'stats', className: 'grid grid-cols-3 gap-4 mb-6' }, [
                        React.createElement('div', { key: 'count', className: 'bg-white p-4 rounded-lg shadow text-center' }, [
                            React.createElement('div', { key: 'num', className: 'text-2xl font-bold text-blue-600' }, transactions.length),
                            React.createElement('div', { key: 'label', className: 'text-sm text-gray-600' }, 'Transactions')
                        ]),
                        React.createElement('div', { key: 'income', className: 'bg-white p-4 rounded-lg shadow text-center' }, [
                            React.createElement('div', { key: 'num', className: 'text-2xl font-bold text-green-600' },
                                '$' + transactions.filter(t => t.amount > 0).reduce((sum, t) => sum + t.amount, 0).toFixed(2)),
                            React.createElement('div', { key: 'label', className: 'text-sm text-gray-600' }, 'Total Income')
                        ]),
                        React.createElement('div', { key: 'expenses', className: 'bg-white p-4 rounded-lg shadow text-center' }, [
                            React.createElement('div', { key: 'num', className: 'text-2xl font-bold text-red-600' },
                                '$' + Math.abs(transactions.filter(t => t.amount < 0).reduce((sum, t) => sum + t.amount, 0)).toFixed(2)),
                            React.createElement('div', { key: 'label', className: 'text-sm text-gray-600' }, 'Total Expenses')
                        ])
                    ]),
                    React.createElement('div', { key: 'actions', className: 'flex gap-3 justify-center' }, [
                        React.createElement('button', {
                            key: 'add',
                            onClick: () => setShowModal(true),
                            className: 'px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-lg'
                        }, '‚ûï Add Transaction'),
                        React.createElement('button', {
                            key: 'export',
                            onClick: exportToCSV,
                            className: 'px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-lg'
                        }, 'üìä Export CSV')
                    ])
                ]),

                React.createElement('div', { key: 'transactions', className: 'max-w-2xl mx-auto' }, [
                    React.createElement('h2', { key: 'tx-title', className: 'text-xl font-semibold mb-4' }, 'Recent Transactions'),
                    React.createElement('div', { key: 'tx-list', className: 'bg-white rounded-lg shadow' },
                        transactions.length === 0 ?
                            React.createElement('div', { className: 'p-8 text-center text-gray-500' }, [
                                React.createElement('div', { key: 'icon', className: 'text-4xl mb-2' }, 'üìù'),
                                React.createElement('div', { key: 'text' }, 'No transactions yet. Click "Add Transaction" to get started!')
                            ]) :
                            transactions.slice().reverse().map(tx =>
                                React.createElement('div', {
                                    key: tx.id,
                                    className: 'p-4 border-b border-gray-200 hover:bg-gray-50 flex justify-between items-center'
                                }, [
                                    React.createElement('div', { key: 'info', className: 'flex-1' }, [
                                        React.createElement('div', { key: 'desc', className: 'font-medium text-gray-900' }, tx.description),
                                        React.createElement('div', { key: 'meta', className: 'text-sm text-gray-600' },
                                            new Date(tx.date).toLocaleDateString() + ' ‚Ä¢ ' + tx.type.charAt(0).toUpperCase() + tx.type.slice(1)
                                        )
                                    ]),
                                    React.createElement('div', { key: 'amount-actions', className: 'flex items-center gap-3' }, [
                                        React.createElement('span', {
                                            key: 'amount',
                                            className: `font-bold text-lg ${tx.amount >= 0 ? 'text-green-600' : 'text-red-600'}`
                                        }, (tx.amount >= 0 ? '+' : '') + '$' + Math.abs(tx.amount).toFixed(2)),
                                        React.createElement('button', {
                                            key: 'edit',
                                            onClick: () => editTransaction(tx.id),
                                            className: 'px-3 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm font-medium'
                                        }, 'Edit'),
                                        React.createElement('button', {
                                            key: 'delete',
                                            onClick: () => deleteTransaction(tx.id),
                                            className: 'px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm font-medium'
                                        }, 'Delete')
                                    ])
                                ])
                            )
                    )
                ]),

                showModal && React.createElement(TransactionModal, {
                    onClose: () => {
                        setShowModal(false);
                        setEditingId(null);
                    },
                    onSave: editingId ? updateTransaction : addTransaction,
                    transaction: editingId ? transactions.find(t => t.id === editingId) : null
                })
            ]);
        }

        function TransactionModal({ onClose, onSave, transaction }) {
            const [description, setDescription] = React.useState(transaction?.description || '');
            const [amount, setAmount] = React.useState(transaction ? Math.abs(transaction.amount).toString() : '');
            const [date, setDate] = React.useState(
                transaction ? new Date(transaction.date).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]
            );
            const [isExpense, setIsExpense] = React.useState(transaction ? transaction.amount < 0 : true);
            const [type, setType] = React.useState(transaction?.type || 'personal');

            const handleSave = () => {
                if (!description.trim() || !amount) {
                    alert('Please fill in description and amount');
                    return;
                }

                const transactionData = {
                    description: description.trim(),
                    amount: isExpense ? -Math.abs(parseFloat(amount)) : Math.abs(parseFloat(amount)),
                    date: new Date(date).toISOString(),
                    type,
                    createdAt: transaction?.createdAt || Date.now(),
                };

                onSave(transactionData);
            };

            return React.createElement('div', {
                className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50'
            },
                React.createElement('div', { className: 'bg-white rounded-lg p-6 max-w-md w-full shadow-xl' }, [
                    React.createElement('h2', { key: 'title', className: 'text-2xl font-bold mb-6 text-center' },
                        transaction ? '‚úèÔ∏è Edit Transaction' : '‚ûï Add Transaction'
                    ),
                    React.createElement('div', { key: 'form', className: 'space-y-4' }, [
                        React.createElement('div', { key: 'desc' }, [
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Description'),
                            React.createElement('input', {
                                type: 'text',
                                value: description,
                                onChange: (e) => setDescription(e.target.value),
                                className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                                placeholder: 'e.g., Coffee at Starbucks'
                            })
                        ]),
                        React.createElement('div', { key: 'amount' }, [
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Amount'),
                            React.createElement('input', {
                                type: 'number',
                                step: '0.01',
                                value: amount,
                                onChange: (e) => setAmount(e.target.value),
                                className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                                placeholder: '0.00'
                            }),
                            React.createElement('div', { key: 'type-radio', className: 'flex gap-6 mt-2' }, [
                                React.createElement('label', { className: 'flex items-center gap-2 cursor-pointer' }, [
                                    React.createElement('input', {
                                        type: 'radio',
                                        checked: !isExpense,
                                        onChange: () => setIsExpense(false),
                                        className: 'text-green-600'
                                    }),
                                    React.createElement('span', { className: 'text-sm font-medium text-green-700' }, 'üí∞ Income')
                                ]),
                                React.createElement('label', { className: 'flex items-center gap-2 cursor-pointer' }, [
                                    React.createElement('input', {
                                        type: 'radio',
                                        checked: isExpense,
                                        onChange: () => setIsExpense(true),
                                        className: 'text-red-600'
                                    }),
                                    React.createElement('span', { className: 'text-sm font-medium text-red-700' }, 'üí∏ Expense')
                                ])
                            ])
                        ]),
                        React.createElement('div', { key: 'date' }, [
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Date'),
                            React.createElement('input', {
                                type: 'date',
                                value: date,
                                onChange: (e) => setDate(e.target.value),
                                className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                            })
                        ]),
                        React.createElement('div', { key: 'type' }, [
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Type'),
                            React.createElement('select', {
                                value: type,
                                onChange: (e) => setType(e.target.value),
                                className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                            }, [
                                React.createElement('option', { key: 'personal', value: 'personal' }, 'üè† Personal'),
                                React.createElement('option', { key: 'business', value: 'business' }, 'üè¢ Business')
                            ])
                        ])
                    ]),
                    React.createElement('div', { key: 'buttons', className: 'flex gap-3 mt-6' }, [
                        React.createElement('button', {
                            onClick: onClose,
                            className: 'flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium'
                        }, '‚ùå Cancel'),
                        React.createElement('button', {
                            onClick: handleSave,
                            className: 'flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium'
                        }, transaction ? 'üíæ Update' : '‚úÖ Save')
                    ])
                ])
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>